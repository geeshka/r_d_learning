1. Скористаючись тераформом та метадата скриптом піднімемо 3 інстанси на Амазоні. Попередньо створюємо юзера, з певними правами в AWS IAM, сгенерувавши для нього ключі доступа AWS cli.
В результаті отримаємо інстанси, які з допомогою команди hostnamectl set-hostname перейменуємо в людські імена k8s-1, k8s-2, k8s-3, та в /etc/hosts вкажемо внутрішні адреси інстансів кластера
![Alt-текст](<3.png>)

Про всяк випадок переконаємось, що наш метадата спрацював і встановив кубернетес. Бачимо, що все добре, й ініціюємо kubeadm на майстер ноді. В мене k8s-1 майстер.
![Alt-текст](<1.png>)

Ініт пройшов успішно, отримую інструкцію з подальшими діями. 
По-перше, це створення директоріх та копіпаст адмін конфіга
![Alt-текст](<2.png>)

Подальша дія - встановлення мережевого плагіну calico
![Alt-текст](<5.png>)

По-третє, можемо вже приєднати наші воркери. Стикнулася з проблемою, що не спрацював BGP calico. На жаль, не наскрінила, але рішення було досить просте - додати в security group 179 TCP порт. Бо я перевірила кожен хост, і на ньому він слухався відусюди, тут я і зрозуміла, в чому справа.
![Alt-текст](<4.png>)

Перевіряємо готовність хостів кластера та поди системи
![Alt-текст](<6.png>)

2. Тепер приступаємо до першої частини завдання, де треба розвернути statufulset. Для цьго треба створити три маніфести: pvc-redis.yml, statefulset-redis.yml, service-redis.yml. Отже, створюємо директорію на воркер ноді manifests/ та самі маніфест ямлики.
![Alt-текст](<9.png>)
![Alt-текст](<8.png>)

За допомогою команди kubectl apply -f pvc-redis.yml приміняємо наш персістент вольюм. Перевіряємо результат:
![Alt-текст](<10.png>)

Тією ж командою приміняємо конфіги statefulset та service
![Alt-текст](<11.png>)

Дивимось на стан наших под kubectl get pods -o wide. Бачимо, що все ready та працює
![Alt-текст](<12.png>)

Перевіряємо стан нашого редіса kubectl logs redis-0, наприклад. Маємо помилку TCP 10250, що говорить про те, що ми знов йдемо в консоль Амазона та відкриваємо цей порт
![Alt-текст](<14.png>)
![Alt-текст](<15.png>)

Підключаємось до наших контейнерів редіса та переконуємось, що наші зміни будуть доступні, навіть якщо ми перезапустимо поду. Все добре, все як треба спрацювало.
![Alt-текст](<16.png>)
![Alt-текст](<17.png>)

3. Тепер додамо daemonset falco. Для цього створимо falco-daemonset.yml з монтуванням необхідних директорій та правами, обмежимо ресурси системи для цього сервісу.

Переконаємо, що поди falco працюють.
![Alt-текст](<20.png>)

Перевіримо логи falco
![Alt-текст](<18.png>)
![Alt-текст](<19.png>)
